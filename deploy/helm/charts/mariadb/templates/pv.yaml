apiVersion: v1
kind: PersistentVolume
metadata:
  name: {{ include "mariadb.fullname" . }}-data-{{ .Values.global.appMode }}-nfs-pv
spec:
  storageClassName: mysql-data
  capacity:
    storage: {{ .Values.volumes.dataPvStorage }}
  accessModes:
  {{- range .Values.volumes.dataAccessModes }}
    - {{ . }}
  {{- end }}
  mountOptions:
    - hard
    - nfsvers=4.1
  nfs:
    {{- if eq .Values.global.appMode "prod" }}
    path: /var/lib/jenkins/workspace/Rebs/volume/mysql
    {{- else if eq .Values.global.appMode "dev" }}
    path: /var/lib/jenkins/workspace/Rebs/volume/mysql-dev
    {{- end }}
    server: {{ .Values.volumes.nfsServerHost }}
---
apiVersion: v1
kind: PersistentVolume
metadata:
  name: {{ include "mariadb.fullname" . }}-sql-{{ .Values.global.appMode }}-nfs-pv
spec:
  storageClassName: backup-sql
  capacity:
    storage: {{ .Values.volumes.sqlPvStorage }}
  accessModes:
  {{- range .Values.volumes.sqlAccessModes }}
    - {{ . }}
  {{- end }}
  mountOptions:
    - hard
    - nfsvers=4.1
  nfs:
    path: /var/lib/jenkins/workspace/Rebs/volume/sql
    server: {{ .Values.volumes.nfsServerHost }}
