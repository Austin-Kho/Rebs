apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "nginx.fullname" . }}-config
data:
  {{- with .Values.imageConfigMaps }}
  BACKEND_HOST: {{ .backendHost | quote }}
  WORKER_PROCESSES: {{ .workerProcesses | quote }}
  WORKER_CONNECTIONS: {{ .workerConnections | quote }}
  KEEPALIVE_TIMEOUT: {{ .keepaliveTimeout | quote }}
  BACKEND_MAX_FAILS: {{ .backendMaxFails | quote }}
  BACKEND_MAX_TIMEOUT: {{ .backendMaxTimeout }}
  LOG_STDOUT: {{ .logStdout | quote }}
  {{- end }}
  SERVER_PORT: {{ .Values.service.port | quote }}